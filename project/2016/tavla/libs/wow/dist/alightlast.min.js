/**
 * Angular Light 0.13.0-alpha10
 * (c) 2016 Oleg Nechaev
 * Released under the MIT License.
 * 2016-07-29, http://angularlight.org/ 
 */!function(){"use strict";function e(){var e={filters:{},text:{},ctrl:{},core:{},utils:{},d:{al:{},bo:{},$global:{}},hooks:{directive:[],binding:[]}},t={};e.f$=t,e.directives=e.d,e.controllers=e.ctrl;var n=function(e,t){var n=e.indexOf(t);n>=0?e.splice(n,1):console.warn("trying to remove not exist item")};!function(){t.before=function(e,t){var n=e.parentNode;n.insertBefore(t,e)},t.after=function(e,t){var n=e.parentNode,r=e.nextSibling;r?n.insertBefore(t,r):n.appendChild(t)},t.remove=function(e){var t=e.parentNode;t&&t.removeChild(e)},t.on=function(e,t,n){e.addEventListener(t,n,!1)},t.off=function(e,t,n){e.removeEventListener(t,n,!1)},t.isFunction=function(e){return e&&"[object Function]"===Object.prototype.toString.call(e)},t.isObject=function(e){return e&&"[object Object]"===Object.prototype.toString.call(e)},t.isElement=function(e){return e instanceof HTMLElement},t.addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},t.removeClass=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi")," ")},t.rawAjax=function(e){var t=new XMLHttpRequest;t.open(e.type||"GET",e.url,!0,e.username,e.password);for(var n in e.headers)t.setRequestHeader(n,e.headers[n]);e.success&&(t.onload=function(){t.status>=200&&t.status<400?e.success(t.responseText):e.error&&e.error()}),e.error&&(t.onerror=e.error),t.send(e.data||null)},t.ajaxCache={},t.ajax=function(e){if(e.username||e.password||e.headers||e.data||!e.cache)return t.rawAjax(e);var n=e.type||"GET",r=n+":"+e.url,i=t.ajaxCache[r];return i||(t.ajaxCache[r]=i={callback:[]}),i.result?void(e.success&&e.success(i.result)):(i.callback.push(e),void(i.loading||(i.loading=!0,t.rawAjax({type:n,url:e.url,success:function(e){i.loading=!1,i.result=e;for(var t=0;t<i.callback.length;t++)i.callback[t].success&&i.callback[t].success(e);i.callback.length=0},error:function(){i.loading=!1;for(var e=0;e<i.callback.length;e++)i.callback[e].error&&i.callback[e].error();i.callback.length=0}}))))},function(){var e='@charset "UTF-8";[al-cloak],[hidden],.al-hide{display:none !important;}',t=document.querySelectorAll("head")[0],n=document.createElement("style");n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}()}(),function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n,r,i=t?t:0;if(!this)throw new TypeError;if(r=this.length,0===r||i>=r)return-1;for(0>i&&(i=r-Math.abs(i)),n=i;r>n;n++)if(this[n]===e)return n;return-1}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),t.browser=function(){var e,t=navigator.appName,n=navigator.userAgent.toLowerCase(),r=n.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return r&&null!=(e=n.match(/version\/([\.\d]+)/i))&&(r[2]=e[1]),r=r?[r[1],r[2]]:[t,navigator.appVersion,"-?"],{name:r[0],version_string:r[1],version:Number(r[1].match(/\d+/))}}();var e=!1,n=!1,r=!1,i=window.$;if(t.__jquery?(r=5,i=t.__jquery):(("chrome"===t.browser.name||"safari"===t.browser.name)&&(e=!0),"firefox"===t.browser.name&&(n=t.browser.version),"msie"===t.browser.name&&(r=t.browser.version)),r&&9>r&&(t.on=function(e,t,n){i(e).on(t,n)},t.off=function(e,t,n){i(e).off(t,n)}),r&&9>r&&(t.ready=function(e){i(function(){e()})}),r&&9>r){var o=function(){};t.rawAjax=function(e){i.ajax({url:e.url,type:e.type||"GET",username:e.username,password:e.password,headers:e.headers,data:e.data}).then(e.success||o,e.error||o)}}r&&9>r&&(t.isElement=function(e){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument})}(),t.ready=function(){function e(){r=!0,t.off(document,"DOMContentLoaded",e);for(var i=0;i<n.length;i++)n[i]();n.length=0}var n=[],r=!1;return t.on(document,"DOMContentLoaded",e),function(e){r?e():n.push(e)}}();var r,i,o,a,l,c,s,u,p,f,h,d,m;e.ChangeDetector=function(e){var t,n;return n=new o,t=new r(n,e||{}),n.topCD=t,t},o=function(){return this.watchers={any:[],finishBinding:[],finishScan:[],finishScanOnce:[],onScanOnce:[]},this.status=null,this.extraLoop=!1,this.finishBinding_lock=!1,this.lateScan=!1,this.topCD=null,this},o.prototype.destroy=function(){return this.watchers.any.length=0,this.watchers.finishBinding.length=0,this.watchers.finishScan.length=0,this.watchers.finishScanOnce.length=0,this.watchers.onScanOnce.length=0,this.topCD?this.topCD.destroy():void 0},r=function(e,t){return this.scope=t,this.locals=t,this.root=e,this.watchList=[],this.destroy_callbacks=[],this.parent=null,this.children=[],this.rwatchers={any:[],finishScan:[]},this},r.prototype["new"]=function(e,t){var n,i,o;return t=t||{},o=this,null==e&&(e=o.scope),i=new r(o.root,e),i.parent=o,e===o.scope&&(t.locals?(n=o._ChildLocals,n||(o._ChildLocals=n=function(){return this.$$root=e,this},n.prototype=o.locals),i.locals=new n):i.locals=o.locals),o.children.push(i),i},r.prototype.destroy=function(){var e,t,r,i,o,a,l,c,s,u,p,f,h,d,m,v,g,y,b,w,k;for(e=this,w=e.root,e.scope=null,e.parent&&n(e.parent.children,e),m=e.destroy_callbacks,o=0,c=m.length;c>o;o++)(i=m[o])();for(v=e.children.slice(),a=0,s=v.length;s>a;a++)t=v[a],t.destroy();for(e.destroy_callbacks.length=0,g=e.watchList,l=0,u=g.length;u>l;l++)r=g[l],r.onStop&&r.onStop();for(e.watchList.length=0,y=e.rwatchers.any,h=0,p=y.length;p>h;h++)k=y[h],n(w.watchers.any,k);for(e.rwatchers.any.length=0,b=e.rwatchers.finishScan,d=0,f=b.length;f>d;d++)k=b[d],n(w.watchers.finishScan,k);e.rwatchers.finishScan.length=0,w.topCD===e&&(w.topCD=null,w.destroy())},s=function(t,n){var r,i,o;if(r=!1,o=n.scope,o.$ns&&o.$ns.filters&&(i=o.$ns.filters[t],i||o.$ns.inheritGlobal||(r=!0)),i||r||(i=e.filters[t]),!i)throw"Filter not found: "+t;return i},p=function(){var e,t;return t=1,e=function(){return"wf"+t++},function(e,t,n,r){var i,o,a,l,c,u,p,f,h,d,m,v,g;for(d=e.root,v=r.isArray?"array":r.deep?"deep":"simple",f=n,h=t.filters.length,p=[];h>0;)a=t.filters[--h].trim(),u=a.indexOf(":"),u>0?(l=a.slice(0,+(u-1)+1||9e9),o=a.slice(u+1)):(l=a,o=null),c=s(l,e),Array.isArray(c)?(k(e.scope,e),i=c[0](o,e.scope,{setValue:f,changeDetector:e}),k(e.scope,null),i.watchMode&&(v=i.watchMode),i.onStop&&p.push(i.onStop),i.onChange&&(f=i.onChange)):Object.keys(c.prototype).length?(k(e.scope,e),i=new c(o,e.scope,{setValue:f,changeDetector:e}),k(e.scope,null),i.setValue=f,i.watchMode&&(v=i.watchMode),i.onStop&&p.push(i.onStop.bind(i)),i.onChange&&(f=i.onChange.bind(i))):f=function(e,t,n,r){return function(i){return t(e(i,n,r.scope))}}(c,f,o,e);return g={oneTime:r.oneTime,onStop:function(){var e,t,n;for(t=0,n=p.length;n>t;t++)(e=p[t])();return p.length=0}},"array"===v?g.isArray=!0:"deep"===v&&(g.deep=!0),m=e.watch(t.expression,f,g)}}(),a=function(e){return this.cb=e},d=function(e,t,r){var i,o;return i=e.root,o=new a(r),e.rwatchers[t].push(o),i.watchers[t].push(o),{stop:function(){return n(e.rwatchers[t],o),n(i.watchers[t],o)}}},m=function(){},r.prototype.watch=function(r,i,o){var a,l,s,u,f,h,v,g,y,b;if(o=o||{},o===!0&&(o={isArray:!0}),o.init&&console.warn("watch.init is depticated"),a=this,y=a.root,b=a.scope,t.isFunction(r))u=r,v=e.utils.getId(),f=!0;else{if(f=!1,u=null,r=r.trim(),"::"===r.slice(0,2)&&(r=r.slice(2),o.oneTime=!0),v=r,"$any"===v)return d(a,"any",i);if("$finishScan"===v)return d(a,"finishScan",i);if("$finishScanOnce"===v)return y.watchers.finishScanOnce.push(i);if("$onScanOnce"===v)return y.watchers.onScanOnce.push(i);if("$destroy"===v)return a.destroy_callbacks.push(i);if("$finishBinding"===v)return y.watchers.finishBinding.push(i);v=o.deep?"d#"+v:o.isArray?"a#"+v:"v#"+v}if(e.debug.watch&&console.log("$watch",r),h=!1,!f)if(o.watchText)u=o.watchText.fn;else{if(l=e.utils.compile.expression(r),l.filters)return p(a,l,i,o);h=l.isSimple&&0===l.simpleVariables.length,u=l.fn}return o.deep&&(o.isArray=!1),s={isStatic:h,isArray:Boolean(o.isArray),extraLoop:!o.readOnly,deep:o.deep===!0?10:o.deep,value:m,callback:i,exp:u,src:""+r,onStop:o.onStop||null,el:o.element||null,ea:o.elementAttr||null},h?a.watch("$onScanOnce",function(){return c(b,s,s.exp(b))}):a.watchList.push(s),g={$:s,stop:function(){return s.isStatic?void 0:(n(a.watchList,s),o.onStop?o.onStop():void 0)},refresh:function(){var t;return t=s.exp(b),s.value=t&&s.deep?e.utils.clone(t,s.deep):t&&s.isArray?t.slice():t}},o.oneTime&&(s.callback=function(e){return void 0!==e?(g.stop(),i(e)):void 0}),g},r.prototype.watchGroup=function(e,n){var r,i,o,a,l,c;if(r=this,!n&&t.isFunction(e)&&(n=e,e=null),c=!1,i=function(){return c?void 0:(c=!0,r.watch("$onScanOnce",function(){return c=!1,n()}))},e)for(o=0,l=e.length;l>o;o++)a=e[o],r.watch(a,i);return i},u=function(){return window.performance?function(){return Math.floor(performance.now())}:function(){return(new Date).getTime()}}(),f=function(e,t){var n,r,i,o,a,l;if(null===e||null===t)return!0;if(o=typeof e,a=typeof t,o!==a)return!0;if("object"===o){if(e.length!==t.length)return!0;for(n=r=0,i=e.length;i>r;n=++r)if(l=e[n],l!==t[n])return!0}return!1},c=function(e,t,n){t.el?t.ea?t.el.setAttribute(t.ea,n):t.el.nodeValue=n:t.callback.call(e,n)},l=function(t,n,r,i){var o,a;return o={src:r.src,scope:n.scope,locals:n.locals},r.el&&(o.element=r.el),a=1===i?"$scan, error in callback: ":"$scan, error in expression: ",e.exceptionHandler(t,a+r.src,o)},i=function(){},h=function(t,n){var r,o,a,c,s,u,p,h,d,v,g,y,b,w,k,x,$,D,C,_,B;if($=t.root,h=!1,c=0,C=0,t){for(k=[],d=0,a=t;a;){for(D=a.scope,b=a.locals,C+=a.watchList.length,x=a.watchList.slice(),v=0,y=x.length;y>v;v++){B=x[v],g=B.value;try{_=B.exp(b)}catch(u){s=u,_=i}if(g!==_){if(w=!1,B.isArray?(r=Array.isArray(g),o=Array.isArray(_),r===o?r?f(g,_)&&(w=!0,B.value=_.slice()):(w=!0,B.value=_):(w=!0,B.value=o?_.slice():_)):B.deep?e.utils.equal(g,_,B.deep)||(w=!0,B.value=e.utils.clone(_,B.deep)):(w=!0,B.value=_),w)if(w=!1,_===i)l(s,a,B);else{c++;try{B.el?B.ea?B.el.setAttribute(B.ea,_):B.el.nodeValue=_:(g===m&&(g=void 0),"$scanNoChanges"!==B.callback.call(D,_,g)&&B.extraLoop&&(h=!0))}catch(p){s=p,l(s,a,B,1)}}e.debug.scan>1&&console.log("changed:",B.src)}}k.push.apply(k,a.children),a=k[d++]}n.total=C,n.changes=c,n.extraLoop=h}},r.prototype.digest=function(){var t,n,r,i,o,a,l,c,s,p;for(c=this.root,o=10,p=0,e.debug.scan&&(s=u()),l={total:0,changes:0,extraLoop:!1,src:"",scope:null,element:null};o;){if(o--,c.extraLoop=!1,c.watchers.onScanOnce.length)for(a=c.watchers.onScanOnce.slice(),c.watchers.onScanOnce.length=0,r=0,i=a.length;i>r;r++)t=a[r],t.call(c);if(h(this,l),p+=l.changes,!l.extraLoop&&!c.extraLoop)break}return e.debug.scan&&(n=u()-s,console.log("$scan: loops: ("+(10-o)+"), last-loop changes: "+l.changes+", watches: "+l.total+" / "+n+"ms")),l.mainLoop=o,l.totalChanges=p,l},r.prototype.scan=function(n){var r,i,o,a,l,c,s,u,p,f,h,d,m;if(m=this.root,n=n||{},t.isFunction(n)&&(n={callback:n}),n.callback&&m.watchers.finishScanOnce.push(n.callback),n.late){if(m.lateScan)return;return m.lateScan=!0,void e.nextTick(function(){return m.lateScan?m.topCD.scan():void 0})}if("scaning"===m.status)return void(m.extraLoop=!0);if(m.lateScan=!1,m.status="scaning",d=m.topCD?m.topCD.digest():{},d.totalChanges)for(f=m.watchers.any,a=0,s=f.length;s>a;a++)(i=f[a])();for(m.status=null,h=m.watchers.finishScan,l=0,u=h.length;u>l;l++)(r=h[l])();for(o=m.watchers.finishScanOnce.slice(),m.watchers.finishScanOnce.length=0,c=0,p=o.length;p>c;c++)r=o[c],r.call(m);if(0===d.mainLoop)throw"Infinity loop detected";return d},e.core.ChangeDetector=r,r.prototype.compile=function(t,n){return e.utils.compile.expression(t,n).fn},r.prototype.setValue=function(t,n){var r,i,o,a,l,c,s,u,p,f,h;r=this,a=r.compile(t+" = $value",{input:["$value"],no_return:!0});try{return a(r.scope,n)}catch(o){if(i=o,u="can't set variable: "+t,e.debug.parser&&console.warn(u),(""+i).indexOf("TypeError")>=0&&(f=t.match(/^([\w\d\.]+)\.[\w\d]+$/),f&&f[1])){for(h=r.scope,p=f[1].split("."),l=0,s=p.length;s>l;l++)c=p[l],void 0===h[c]&&(h[c]={}),h=h[c];try{return void a(r.scope,n)}catch(d){}}return e.exceptionHandler(i,u,{name:t,value:n})}},r.prototype.eval=function(e){var t;return(t=this.compile(e))(this.locals)},r.prototype.getValue=function(e){return this.eval(e)};var v,g,y,b,w,k,x;e.hooks.scope=[],window.Map?(w=new Map,b=new Map,x=function(e,t){return w.set(e,t)},y=function(e){return w.get(e)},g=function(e){var t,n;return t=b.get(e),t?t:(n=y(e),n.children.length?null:n)},k=function(e,t){return b.set(e,t)}):(x=function(e,t){return e.$rootChangeDetector=t},y=function(e){return e.$rootChangeDetector},g=function(e){return e.$changeDetector?e.$changeDetector:e.$rootChangeDetector.children.length?null:e.$rootChangeDetector},k=function(e,t){return e.$changeDetector=t}),e.core.cd_setRoot=x,e.core.cd_getRoot=y,e.core.cd_getActive=g,e.core.cd_setActive=k,e.Scope=function(t){var n,r,i,o,a,l,c,s;if(t=t||{},t.customScope){if(c=t.customScope,!c.$scan)for(a in v.prototype)c[a]=v.prototype[a]}else c=new v;if(n=t.childFromChangeDetector?t.childFromChangeDetector["new"](c):e.ChangeDetector(c),x(c,n),t.$parent&&(c.$parent=t.$parent),k(c,null),e.hooks.scope.length){for(s={scope:c,changeDetector:n},l=e.hooks.scope,i=0,o=l.length;o>i;i++)r=l[i],r.fn.call(s);c=s.scope}return t.returnChangeDetector?n:c},v=function(){},e.core.Scope=v,v.prototype.$watch=function(t,n,r){var i;return i=g(this),i?i.watch(t,n,r):e.exceptionHandler("","You can do scope.$watch during binding only, use env.watch instead: "+t,{name:t,option:r,scope:this})},v.prototype.$watchGroup=function(t,n){var r;return r=g(this),r?r.watchGroup(t,n):e.exceptionHandler("","You can do scope.$watchGroup during binding only, use env.watchGroup instead: "+name,{keys:t,option:option,scope:this})},v.prototype.$scan=function(e){return y(this).scan(e)},v.prototype.$setValue=function(e,t){y(this).setValue(e,t)},v.prototype.$getValue=function(e){return y(this).getValue(e)},v.prototype.$eval=function(e){return y(this).eval(e)},v.prototype.$compile=function(e,t){return y(this).compile(e,t)},v.prototype.$destroy=function(){y(this).destroy()},v.prototype.$new=function(){var t;if(t=g(this),!t)throw"No change detector";return e.Scope({$parent:this,childFromChangeDetector:t})},function(){var n,i;return e.utils.optmizeElement=n=function(r){var i,o,a,l,c,s,u,p,f,h,d,m,v,g,y,b,w,k,x;if(1===r.nodeType)for(l=r.firstChild;l;)g=l.nextSibling,n(l),l=g;else if(3===r.nodeType){if(k=r.data,m=e.utils.pars_start_tag,s=k.indexOf(m),0>s)return;if(k.slice(s+m.length).indexOf(m)<0)return;for(y="t",i={value:""},w=[i],a=e.utils.parsText(k),u=0,f=a.length;f>u;u++)o=a[u],"text"===o.type?i.value+=o.value:(c=o.list.join("|"),x="{{"+c+"}}",d=c.match(/^([^\w\d\s\$"'\(\u0410-\u044F\u0401\u0451]+)/),d?("t"===y||"d"===y?i.value+=x:(i={value:x},w.push(i)),y="d"):1===o.list.length?("t"===y||"v"===y?i.value+=x:(i={value:x},w.push(i)),y="v"):"t"===y?i.value+=x:(i={value:x},w.push(i)));if(w.length<2)return;for(l=r,l.data=w[0].value,b=w.slice(1),p=0,h=b.length;h>p;p++)o=b[p],v=document.createTextNode(o.value),t.after(l,v),l=v}},e.text.$base=function(t){var n,r,i,o,a;if(o=t.point,n=t.cd,a=n.scope,r=a.$ns&&a.$ns.text?a.$ns.text[t.name]:e.text[t.name],!r)throw"No directive alight.text."+t.name;return i={changeDetector:n,setter:function(e){return t.update?(o.value=null===e?"":""+e,t.update()):void 0},setterRaw:function(e){return t.updateRaw?(o.value=null===e?"":""+e,t.updateRaw()):void 0},"finally":function(e){return t["finally"]?(o.value=null===e?"":""+e,o.type="text",t["finally"](),t.update=null,t["finally"]=null):void 0}},k(a,n),r(i.setter,t.exp,a,i),k(a,null)},i=function(t,n,r){var i,o,a,l,s,u,p,f,h,d,m,v,g,y,b,w,k,x,$,D,C,_,B,A,T,S,N,E,M;if(r=r||{},o=this,e.debug.watchText&&console.log("$watchText",t),A=e.utils.compile.buildSimpleText(t,null))return void o.watch(t,n,{watchText:A,element:r.element,elementAttr:r.elementAttr});for(s=e.utils.parsText(t),E=0,i=!0,C=!1,p=f=u=function(){},g=0,w=s.length;w>g;g++)if(l=s[g],"expression"===l.type)if(h=l.list.join(" | "),$=h.match(/^([^\w\d\s\$"'\(\u0410-\u044F\u0401\u0451]+)/))l.isDir=!0,D=$[1],"#"===D?(v=h.indexOf(" "),0>v?(D=h.substring(1),h=""):(D=h.slice(1,v),h=h.slice(v))):h=h.substring(D.length),e.text.$base({name:D,exp:h,cd:o,point:l,update:function(){return p()},updateRaw:function(){return f()},"finally":function(){return p(),u()}}),C=!0,"text"!==l.type&&(i=!1);else if(a=e.utils.compile.expression(h,{string:!0}),a.filters)E++,i=!1,l.watched=!0,function(e){return o.watch(h,function(t){return null==t&&(t=""),e.value=t,p()})}(l);else{if(l.fn=a.fn,!a.rawExpression)throw"Error";a.isSimple&&0===a.simpleVariables.length?(l.type="text",l.value=l.fn()):(l.re=a.rawExpression,E++)}if(i){if(!E){for(S="",y=0,k=s.length;k>y;y++)l=s[y],S+=l.value;return void o.watch("$onScanOnce",function(){return c(o.scope,{callback:n,el:r.element,ea:r.elementAttr},S)})}return A=C?e.utils.compile.buildSimpleText(null,s):e.utils.compile.buildSimpleText(t,s),void o.watch(t,n,{watchText:{fn:A.fn},element:r.element,elementAttr:r.elementAttr})}if(M={callback:n,el:r.element,ea:r.elementAttr},s.scope=o.scope,m=e.utils.compile.buildText(t,s),f=function(){return c(o.scope,M,m())},E){for(N=null,B="",p=function(){B=m()},u=function(){var e,t;for(v=!0,e=0,t=s.length;t>e;e++)if(l=s[e],"expression"===l.type){v=!1;break}v&&(o.watch("$finishScanOnce",function(){return N.stop()}),r.onStatic&&r.onStatic())},_=function(){return B},b=0,x=s.length;x>b;b++)if(l=s[b],"expression"===l.type){if(l.isDir||l.watched)continue;l.watched=!0,function(e,t){return o.watch(t,function(t){return null==t&&(t=""),e.value=t,p()})}(l,l.list.join(" | "))}p(),N=o.watch(_,n,{element:r.element,elementAttr:r.elementAttr})}else T=!1,d=function(){return T=!1,f()},(p=function(){return T?void 0:(T=!0,o.watch("$onScanOnce",d))})()},r.prototype.watchText=i,v.prototype.$watchText=function(t,n,r){var i;return(i=g(this))?i.watchText(t,n,r):void e.exceptionHandler("","You can do $watchText during binding only, use env.watchText instead: "+t,{expression:t,option:r,scope:this})}}(),e.core.DoubleBinding=function(){var e,t,n,r,i;return n=[],i=null,e=[],t=function(){var e,t,o,a,l,c,s,u,p,f;for(c=i,i=null,l=0,s=n.length;s>l;l++)if(t=n[l],t.node.index=c,!t.element.parentNode||(u=r(t.element.parentNode),u.index!==c)){f=t.parentDir+" -> ",p=t.node.started;for(o in p)e=p[o],e>1&&(f+=" "+o);a=t.element,3===a.nodeType&&(a=a.parentNode),console.warn(f,a)}n.length=0},r=function(e){var t;return(t=e.__dbiner)?t:(t={started:{},count:0,binder:[]},e.__dbiner=t,t)},{startDirective:function(o,a,l,c){var s;return s=r(o),s.started[a]?(s.started[a]+=1,n.push({element:o,parentDir:e[e.length-1]||"Manual",node:s}),i||(i=setTimeout(t,100))):s.started[a]=1,c?void 0:e.push(a+'="'+l+'"')},finishDirective:function(t){var n;return n=r(t),e.pop()}}};var $,D,C,_,B,A,T,S,N;e.version="0.13.0-alpha10",e.debug={scan:0,directive:!1,watch:!1,watchText:!1,parser:!1,domOptimization:!0,doubleBinding:0,fastBinding:!0},T=function(){return e.core.DoubleBinding?e.core.DoubleBinding():{startDirective:function(){},finishDirective:function(){}}}(),function(){var n;return e.hooks.attribute=n=[],n.push({code:"dataPrefix",fn:function(){"data-"===this.attrName.slice(0,5)&&(this.attrName=this.attrName.slice(5))}}),n.push({code:"colonNameSpace",fn:function(){var e,t;this.directive||this.name||(t=this.attrName.match(/^(\w+)[\-\:](.+)$/),t?(this.ns=t[1],e=t[2]):(this.ns="$global",e=this.attrName),t=e.match(/^([^\.]+)\.(.*)$/),t&&(e=t[1],this.attrArgument=t[2]),this.name=e.replace(/(-\w)/g,function(e){return e.substring(1).toUpperCase()}))}}),n.push({code:"getScopeDirective",fn:function(){var e,t;if(!this.directive&&(e=this.cd.scope.$ns,e&&e.directives))if(t=e.directives[this.ns]){if(this.directive=t[this.name],!this.directive&&!e.inheritGlobal)return this.result="$global"===this.ns?"noNS":"noDirective",void(this.stop=!0)}else e.inheritGlobal||(this.result="noNS",this.stop=!0)}}),n.push({code:"getGlobalDirective",fn:function(){var t;if(!this.directive){if(t=e.d[this.ns],!t)return this.result="noNS",void(this.stop=!0);this.directive=t[this.name],this.directive||(this.result="$global"===this.ns?"noNS":"noDirective",this.stop=!0)}}}),n.push({code:"cloneDirective",fn:function(){var e,n,r,i;if(r=this.directive,e={},t.isFunction(r))e.init=r;else{if(!t.isObject(r))throw"Wrong directive: "+ns+"."+name;for(n in r)i=r[n],e[n]=i}if(e.priority=r.priority||0,e.restrict=r.restrict||"A",e.restrict.indexOf(this.attrType)<0)throw"Directive has wrong binding (attribute/element): "+name;this.directive=e}}),n.push({code:"preprocessor",fn:function(){var t,n,r;r=this.ns,n=this.name,t=this.directive,t.$init=function(i,o,a,l){var c,s;return c=function(){var e,t,n,r,i;for(r=s.procLine,t=n=0,i=r.length;i>n;t=++n)if(e=r[t],e.fn.call(s),s.isDeferred){s.procLine=r.slice(t+1);break}return s.async=!0,null},s={element:o,value:a,cd:i,env:l,ns:r,name:n,doBinding:!1,directive:t,isDeferred:!1,procLine:e.hooks.directive,makeDeferred:function(){return s.isDeferred=!0,s.doBinding=!0,s.retStopBinding=!0,s.async=!1,function(){return s.isDeferred=!1,s.async?c():void 0}}},t.stopBinding&&(l.stopBinding=!0),c(),s.retStopBinding?"stopBinding":void 0}}})}(),function(){var n;return n=e.hooks.directive,n.push({code:"init",fn:function(){var t;this.directive.init&&(e.debug.directive&&this.directive.scope&&console.warn(this.ns+"-"+this.name+" uses scope and init together, probably you need use link instead of init"),this.env.changeDetector=this.cd,k(this.cd.scope,this.cd),t=this.directive.init.call(this.env,this.cd.scope,this.element,this.value,this.env),t&&t.start&&t.start(),k(this.cd.scope,null))}}),n.push({code:"templateUrl",fn:function(){var e,n;n=this,this.directive.templateUrl&&(e=this.makeDeferred(),t.ajax({cache:!0,url:this.directive.templateUrl,success:function(t){return n.directive.template=t,e()},error:e}))}}),n.push({code:"template",fn:function(){var e;this.directive.template&&(1===this.element.nodeType?this.element.innerHTML=this.directive.template:8===this.element.nodeType&&(e=document.createElement("p"),e.innerHTML=this.directive.template.trim(),e=e.firstChild,t.after(this.element,e),this.element=e,this.doBinding=!0))}}),n.push({code:"scope",fn:function(){var t,n,r;if(this.directive.scope){switch(n=this.cd,this.directive.scope){case!0:r=e.Scope({$parent:n.scope,childFromChangeDetector:n}),t=y(r);break;case"root":r=e.Scope({$parent:n.scope}),t=y(r),n.watch("$destroy",function(){return t.destroy()});break;default:throw"Wrong scope value: "+this.directive.scope}this.env.parentChangeDetector=n,this.cd=t,this.doBinding=!0,this.retStopBinding=!0}}}),n.push({code:"link",fn:function(){var e;this.directive.link&&(this.env.changeDetector=this.cd,k(this.cd.scope,this.cd),e=this.directive.link.call(this.env,this.cd.scope,this.element,this.value,this.env),e&&e.start&&e.start(),k(this.cd.scope,null))}}),n.push({code:"scopeBinding",fn:function(){this.doBinding&&!this.env.stopBinding&&e.bind(this.cd,this.element,{skip_attr:this.env.skippedAttr()})}})}(),N=function(){var t;return t=function(e,t,n){var r;"A"===t.attr_type?(r=n||{},r.priority=-5,r.is_attr=!0,r.name=e,r.attrName=e,r.element=t.element,t.list.push(r)):"M"===t.attr_type&&t.list.push(n)},function(n,r){var i,o,a,l,c;if(r.skip_attr.indexOf(n)>=0)return t(n,r,{skip:!0});for(o={attrName:n,attrType:r.attr_type,element:r.element,cd:r.cd,result:null},c=e.hooks.attribute,a=0,l=c.length;l>a&&(i=c[a],i.fn.call(o),!o.stop);a++);return"noNS"===o.result?void t(n,r):"noDirective"===o.result?"E"===r.attr_type?void r.list.push({name:n,priority:0,attrName:n,noDirective:!0}):void t(n,r,{noDirective:!0}):void r.list.push({name:n,directive:o.directive,priority:o.directive.priority,attrName:n,attrArgument:o.attrArgument})}}(),S=function(e,t){return e.priority===t.priority?0:e.priority>t.priority?-1:1},D=function(t,n,r,i){var o;return o=r,o.indexOf(e.utils.pars_start_tag)<0?void 0:(t.watchText(o,null,{element:n,elementAttr:i}),!0)},A=function(t,n){var r;return r=n.data,r.indexOf(e.utils.pars_start_tag)<0?void 0:(t.watchText(r,null,{element:n}),r)},C=function(t,n){var r,i,o,a,l,c,s,u,p,f,h;if(f=n.nodeValue.trim(),"directive:"===f.slice(0,10)){if(f=f.slice(10).trim(),u=f.indexOf(" "),u>=0?(o=f.slice(0,+(u-1)+1||9e9),h=f.slice(u+1)):(o=f,h=""),r={list:p=[],element:n,attr_type:"M",cd:t,skip_attr:[]},N(o,r),i=p[0],i.noDirective)throw"Comment directive not found: "+o;a=i.directive,c={element:n,attrName:o,attributes:[],skippedAttr:function(){return[]}},e.debug.directive&&console.log("bind",i.attrName,h,i),e.debug.doubleBinding&&T.startDirective(n,i.attrName,h);try{a.$init(t,n,h,c)}catch(s){l=s,e.exceptionHandler(l,"Error in directive: "+i.name,{value:h,env:c,cd:t,scope:t.scope,element:n})}return e.debug.doubleBinding&&T.finishDirective(n,i.attrName),c.skipToElement?{directive:1,skipToElement:c.skipToElement}:{directive:1,skipToElement:null}}},$=function(e){var t,n;for(t in e)n=e[t],this[t]=n;return this},$.prototype.takeAttr=function(e,t){var n,r,i,o,a;for(1===arguments.length&&(t=!0),o=this.attributes,r=0,i=o.length;i>r;r++)if(n=o[r],n.attrName===e)return t&&(n.skip=!0),a=this.element.getAttribute(e),a||!0},$.prototype.skippedAttr=function(){var e,t,n,r,i;for(r=this.attributes,i=[],t=0,n=r.length;n>t;t++)e=r[t],e.skip&&i.push(e.attrName);return i},$.prototype.scan=function(e){return this.changeDetector.scan(e)},$.prototype.watch=function(e,t,n){return this.changeDetector.watch(e,t,n)},$.prototype.watchGroup=function(e,t){return this.changeDetector.watchGroup(e,t)},$.prototype.watchText=function(e,t,n){return this.changeDetector.watchText(e,t,n)},$.prototype.getValue=function(e){return this.changeDetector.getValue(e)},$.prototype.setValue=function(e,t){return this.changeDetector.setValue(e,t)},$.prototype.eval=function(e){return this.changeDetector.getValue(e)},$.prototype["new"]=function(e,t){return t===!0?t={locals:!0}:e===!0&&null==t&&(e=null,t={locals:!0}),this.changeDetector["new"](e,t)},$.prototype.bind=function(){var n,i,o,a,l,c,s;for(this.stopBinding=!0,o=0,l=0,c=arguments.length;c>l;l++)n=arguments[l],n instanceof r&&(i=n,o+=1),t.isElement(n)&&(a=n,o+=1);return s=arguments[o],s||(s={skip:this.skippedAttr()}),a||(a=this.element),i||(i=this.changeDetector),e.bind(i,a,s)},_=function(){return function(t,n,r){var i,o,a,l,c,s,u,p,f,h,d,m,v,g,y,b,w,k,x,C,_,A,E,M,O,j,L,V;if(v={attr:[],dir:[],children:[]},c={directive:0,hook:0,skipToElement:null,fb:v},r=r||{},O=!1,L=r.skip_attr,r.skip===!0?r.skip_top=!0:L||(L=r.skip||[]),L instanceof Array||(L=[L]),!r.skip_top){for(i={list:x=[],element:n,skip_attr:L,attr_type:"E",cd:t},a=n.nodeName.toLowerCase(),N(a,i),("script"===a||"style"===a)&&(O=!0),i.attr_type="A",E=n.attributes,y=0,b=E.length;b>y;y++)o=E[y],N(o.name,i);if(r.attachDirective){M=r.attachDirective;for(a in M)l=M[a],N(a,i)}for(x=x.sort(S),C=0,w=x.length;w>C;C++)if(p=x[C],!p.skip){if(p.noDirective)throw"Directive not found: "+p.name;if(p.skip=!0,V=r.attachDirective&&r.attachDirective[p.attrName]?r.attachDirective[p.attrName]:n.getAttribute(p.attrName),p.is_attr)e.debug.doubleBinding&&T.startDirective(n,p.attrName,V,!0),D(t,n,V,p.attrName)&&v.attr.push({attrName:p.attrName,value:V});else{f=p.directive,d=new $({element:n,attrName:p.attrName,attrArgument:p.attrArgument||null,attributes:x,stopBinding:!1,elementCanBeRemoved:r.elementCanBeRemoved}),e.debug.directive&&console.log("bind",p.attrName,V,p),e.debug.doubleBinding&&T.startDirective(n,p.attrName,V);try{"stopBinding"===f.$init(t,n,V,d)&&(O=!0)}catch(m){h=m,e.exceptionHandler(h,"Error in directive: "+p.attrName,{value:V,env:d,cd:t,scope:t.scope,element:n})}if(d.fastBinding?v.dir.push({fb:f.init,attrName:p.attrName,value:V,attrArgument:d.attrArgument}):c.directive++,e.debug.doubleBinding&&T.finishDirective(n,p.attrName),d.stopBinding){O=!0;break}d.skipToElement&&(c.skipToElement=d.skipToElement)}}}if(!O)for(j=null,u=function(){var e,t,r,i;for(r=n.childNodes,i=[],t=0,e=r.length;e>t;t++)s=r[t],i.push(s);return i}(),g=_=0,k=u.length;k>_;g=++_)s=u[g],s&&(j?j===s&&(j=null):(A=B(t,s),c.directive+=A.directive,c.hook+=A.hook,j=A.skipToElement,A.fb&&(A.fb.text||A.fb.attr&&A.fb.attr.length||A.fb.dir&&A.fb.dir.length||A.fb.children&&A.fb.children.length)&&v.children.push({index:g,fb:A.fb})));return c}}(),B=function(t,n,r){var i,o,a,l,c,s,u;if(s={directive:0,hook:0,skipToElement:null,fb:null},e.hooks.binding.length)for(c=e.hooks.binding,o=0,a=c.length;a>o;o++)if(i=c[o],s.hook+=1,l=i.fn(t,n,r),l&&l.owner)return s;return 1===n.nodeType?(l=_(t,n,r),s.directive+=l.directive,s.hook+=l.hook,s.skipToElement=l.skipToElement,s.fb=l.fb):3===n.nodeType?(e.debug.doubleBinding&&T.startDirective(n,"text","",!0),u=A(t,n,r),u&&(s.fb={text:u})):8===n.nodeType&&(l=C(t,n,r),l&&(s.directive+=l.directive,s.skipToElement=l.skipToElement)),s},e.nextTick=function(){var t,n,r;return r=null,n=[],t=function(){var t,i,o,a,l,c,s,u;for(r=null,i=n.slice(),n.length=0,c=0,s=i.length;s>c;c++){l=i[c],t=l[0],u=l[1];try{t.call(u)}catch(a){o=a,e.exceptionHandler(o,"$nextTick, error in function",{fn:t,self:u})}}return null},function(e){return n.push([e,this]),r?void 0:r=setTimeout(t,0)}}(),e.bind=e.applyBindings=function(t,n,r){var i,o,a,l,c,s,u,p;if(!n)throw"No element";if(!t)throw"No Scope";if(r=r||{},o=t instanceof e.core.ChangeDetector?t:r.changeDetector||g(t)||y(t),p=o.root,a=!p.finishBinding_lock,a&&(p.finishBinding_lock=!0,p.bindingResult={directive:0,hook:0}),u=B(o,n,r),p.bindingResult.directive+=u.directive,p.bindingResult.hook+=u.hook,o.digest(),a){for(p.finishBinding_lock=!1,s=p.watchers.finishBinding.slice(),p.watchers.finishBinding.length=0,l=0,c=s.length;c>l;l++)(i=s[l])();u.total=p.bindingResult}return u},e.bootstrap=function(n,r){var i,o,a,l,c,s,u,p;if(!n)return e.bootstrap("[al-app]"),e.bootstrap("[al\\:app]"),void e.bootstrap("[data-al-app]");if("string"==typeof n?n=document.querySelectorAll(n):t.isElement(n)&&(n=[n]),Array.isArray(n)||"number"==typeof n.length){for(l=null,r&&(s=e.Scope({customScope:r})),a=0,c=n.length;c>a;a++)o=n[a],o.ma_bootstrapped||(o.ma_bootstrapped=!0,p=s?s:e.Scope(),u={skip_attr:["al-app","al:app","data-al-app"]},i=o.getAttribute("al-app")||o.getAttribute("al:app")||o.getAttribute("data-al-app"),i&&(u.attachDirective={"al-ctrl":i}),e.debug.domOptimization&&e.utils.optmizeElement(o),e.bind(p,o,u),l=p);return l}e.exceptionHandler("Error in bootstrap","Error input arguments",{input:n})};var E,M;e.utils.getId=function(){var e,t;return t=function(){var e,t,n,r,i,o;for(o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),n=Math.floor((new Date).valueOf()/1e3)-1388512800,i="";n>0;)e=Math.floor(n/62),r=62*e,t=n-r,n=e,i=o[t]+i;return i}(),e=1,function(){return t+"#"+e++}}(),e.utils.clone=E=function(e,t){var n,r,i,o;if(null==t&&(t=128),1>t)return null;if(!e)return e;if("object"==typeof e){if(e instanceof Array)return i=function(){var r,i,o;for(o=[],r=0,i=e.length;i>r;r++)n=e[r],o.push(E(n,t-1));return o}();if(e instanceof Date)return new Date(e.valueOf());if(e.nodeType&&"function"==typeof e.cloneNode)return e;i={};for(r in e)o=e[r],"$"!==r[0]&&(i[r]=E(o,t-1));return i}return e},e.utils.equal=M=function(e,t,n){var r,i,o,a,l,c,s,u;if(null==n&&(n=128),1>n)return!0;if(!e||!t)return e===t;if(c=typeof e,s=typeof t,c!==s)return!1;if("object"===c){if(e instanceof Array){if(e.length!==t.length)return!1;for(r=i=0,a=e.length;a>i;r=++i)if(u=e[r],!M(u,t[r],n-1))return!1;return!0}if(e instanceof Date)return e.valueOf()===t.valueOf();if(e.nodeType&&"function"==typeof e.cloneNode)return e===t;l={};for(o in e)if(u=e[o],"$"!==o[0]&&(l[o]=!0,!M(u,t[o],n-1)))return!1;
for(o in t)if(u=t[o],"$"!==o[0]&&!l[o]&&!M(u,e[o],n-1))return!1;return!0}return e===t},e.exceptionHandler=function(e,t,n){var r;return r=[],t&&r.push(t),e&&e.message&&r.push(e.message),n&&r.push(n),e&&r.push(e.stack?e.stack:e),console.error.apply(console,r)},function(){var t,n,r,i,o,a;return a=function(){var e,t,n,r;for(r={},e=0,n=arguments.length;n>e;e++)t=arguments[e],r[t]=!0;return r},o=a("instanceof","typeof","in","null","true","false","undefined","return"),n=function(){var e;return e=/[a-zA-Z\u0410-\u044F\u0401\u0451_\.\$]/,function(t){return t.match(e)}}(),r=function(e){return e.charCodeAt()>=48&&e.charCodeAt()<=57},i=function(){var e;return e=a("+","-",">","<","=","&","|","^","!","~"),function(t){return e[t]||!1}}(),t=a("=","+=","-=","++","--","|=","^=","&=","!=","<<=",">>="),e.utils.parsExpression=function(l,c){var s,u,p,f,h,d,m,v,g,y;return c=c||{},h=a.apply(null,c.input||[]),y=1,d=function(e){var o,a,l,c,s,u,p,f,h,m,v,g,b,w,k,x,$,D,C,_,B,A;for(b=e.line,k=e.result||[],m=e.index||0,g=e.level||0,D=e.stopKey||null,B="",v=null,A=[],x="",p="",$=!1,w="",C="",_="",h="",c=0,f=null,u=function(){return h&&k.push({type:"free",value:h}),h=""};m<=b.length;)if(l=b[m-1],o=b[m++]||"",a=b[m],($&&h||!o)&&u(),"string"!==$){if("key"===$){if(n(o)||r(o)){B+=o;continue}if("["===o){if(B+=o,s=d({line:b,index:m,level:g+1,stopKey:"]"}),!s.stopKeyOk)throw"Error expression";m=s.index,B+="###"+s.uniq+"###]",A.push(s);continue}if("?"===o&&("."===a||"("===a||"["===a)){B+=o;continue}if("("===o){if(B+=o,s=d({line:b,index:m,level:g+1,stopKey:")"}),!s.stopKeyOk)throw"Error expression";m=s.index,B+="###"+s.uniq+"###)",A.push(s);continue}v={type:"key",value:B,start:m-B.length-1,finish:m-1,children:A},k.push(v),$="",B="",A=[]}else if("sign"===$){if(i(o)){x+=o;continue}if("|"===x&&0===g&&0===c){f=b.substring(m-1),m=b.length+1;continue}(t[x]||"="===x[0]&&"="!==x[1])&&(v.assignment=!0),k.push({type:"sign",value:x}),$="",x=""}else if("digit"===$){if(r(o)||"."===o){p+=o;continue}k.push({type:"digit",value:p}),p=""}if(n(o))$="key",B+=o;else if(i(o))$="sign",x+=o;else if(r(o))$="digit",p+=o;else if('"'!==o&&"'"!==o){if(o===D)return u(),{result:k,index:m,stopKeyOk:!0,uniq:y++};"("===o&&c++,")"===o&&c--,"{"!==o?(":"===o&&"}"===D&&(v.type="free"),h+=o):(u(),s=d({line:b,index:m,level:g+1,stopKey:"}"}),k.push({type:"{}",child:s}),m=s.index)}else C=o,$="string",_+=o}else{if(o===C&&"\\"!==l){_+=o,k.push({type:"string",value:_}),_="",C="",$="";continue}_+=o}return u(),{result:k,index:m,filters:f}},p=d({line:l}),m={isSimple:!p.filters,simpleVariables:[]},p.filters?(m.expression=l.substring(0,l.length-p.filters.length-1),m.filters=p.filters.split("|")):m.expression=l,v=function(e){var t;return t=e.split(/[\.\[\(\?]/),{count:t.length,firstPart:t[0]}},g=function(e,t){return t?"($$="+e+",$$==null)?undefined:":"($$=$$"+e+",$$==null)?undefined:"},f=function(e){return e.split(/[\.\[\(\?]/)[0]},u=function(e){var t,n,r,i,a,l,c,s,u,p;if("this"===e)return"$$scope";if(t=f(e),i=o[t]||h[t],s=e.split("?"),1===s.length)return i?e:"$$scope."+e;for(i?(p=g(s[0],!0),n=s[0]):(p=g("scope."+s[0]),n="scope."+s[0]),u=s.slice(1,s.length-1),r=0,l=u.length;l>r;r++)c=u[r],"("===c[0]?p+=g(n+c,i):(p+=g(c),n+=c);return a=s[s.length-1],"("===a[0]?(i||(p+="$$"),p+=n+a):p+="$$"+a,"("+p+")"},s=function(e){var t,n,r,i,a,l,c,p,f,h,d,g,y;for(g="",h=e.result,i=0,c=h.length;c>i;i++)if(r=h[i],"key"!==r.type)g+="{}"!==r.type?r.value:"{"+s(r.child)+"}";else{if(r.assignment?(y=v(r.value),f="this"===y.firstPart?"$$scope"+r.value.substring(4):y.count<2?"($$scope.$$root || $$scope)."+r.value:"$$scope."+r.value,m.isSimple=!1):o[r.value]?f=r.value:(f=u(r.value),m.simpleVariables.push(f)),r.children.length)for(d=r.children,a=0,p=d.length;p>a;a++)t=d[a],l="###"+t.uniq+"###",n=s(t),f=f.split(l).join(n);g+=f}return g},m.result=s(p),e.debug.parser&&console.log(l,m),m}}(),function(){var t,n,r;return e.utils.pars_start_tag="{{",e.utils.pars_finish_tag="}}",r=function(t){var n,r,i,o,a,l,c,s,u;return u=e.utils.pars_start_tag,r=e.utils.pars_finish_tag,c=[],o=0,l=0,i=function(e){var n;return e=e||1,n=t.substring(l,o-e),l=o,n},s=null,a=function(e,n,l){var u,p,f,h;for(e||(s={type:"expression",list:[]},c.push(s)),h=null,u=null;o<t.length;){if(h=u,u=t[o],o+=1,p=h+u,f=t[o],u===n)return;if(!l){if(p===r&&0===e)return s.list.push(i(2)),!0;"("===u?a(e+1,")"):"{"===u?a(e+1,"}"):'"'===u?a(e+1,'"',!0):"'"===u?a(e+1,"'",!0):"|"===u&&0===e&&("|"===f?o+=1:s.list.push(i()))}}},n=function(){var e,n,r,l,s;for(r=null,e=null;o<t.length;)if(r=e,e=t[o],o+=1,n=r+e,n===u){if(s=i(2),s&&c.push({type:"text",value:s}),!a(0))throw"Wrong expression"+t;e=null}return l=i(-1),l?c.push({type:"text",value:l}):void 0},n(),e.debug.parser&&console.log("parsText",c),c},t={},n=function(e){var t,n,r;return r=function(){var r,i,o;for(o=[],r=0,i=e.length;i>r;r++)t=e[r],n={type:t.type,value:t.value},t.list&&(n.list=t.list.slice()),o.push(n);return o}()},e.utils.parsText=function(e){var i;return i=t[e],i||(t[e]=i=r(e)),n(i)}}(),function(){var t;return e.utils.compile=t={},t.cache={},t.Function=Function,t.expression=function(n,r){var i,o,a,l,c,s,u,p,f;if(r=r||{},n=n.trim(),u=n+"#",u+=r.no_return?"+":"-",u+=r.string?"s":"v",r.input&&(u+=r.input.join(",")),s=t.cache[u])return s;s=e.utils.parsExpression(n,{input:r.input}),l=s.result,p=r.no_return||!1,p?f="var $$;"+l:r.string&&!s.filters?(f="var $$, __ = ("+l+"); return '' + (__ || (__ == null?'':__))",s.rawExpression="(__="+l+") || (__ == null?'':__)"):f="var $$;return ("+l+")";try{r.input?(i=r.input.slice(),i.unshift("$$scope"),i.push(f),c=t.Function.apply(null,i)):c=t.Function("$$scope",f)}catch(a){throw o=a,e.exceptionHandler(o,"Wrong expression: "+n,{src:n,cfg:r}),"Wrong expression: "+l}return s.fn=c,t.cache[u]=s},t.cacheText={},t.buildText=function(e,n){var r,i,o,a,l,c,s;if(o=t.cacheText[e])return function(){return o.call(n)};for(s=[],l=a=0,c=n.length;c>a;l=++a)r=n[l],"expression"===r.type?s.push(r.fn?"this["+l+"].fn(this.scope)":"((x=this["+l+"].value) || (x == null?'':x))"):r.value&&(i=r.value.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n"),s.push('"'+i+'"'));return s=s.join(" + "),o=t.Function("var x; return ("+s+")"),t.cacheText[e]=o,function(){return o.call(n)}},t.cacheSimpleText={},t.buildSimpleText=function(e,n){var r,i,o,a,l,c,s,u,p;if(c=e?t.cacheSimpleText[e]:null,c||!n)return c||null;for(u=[],p=[],l=a=0,s=n.length;s>a;l=++a)r=n[l],"expression"===r.type?(u.push("("+r.re+")"),r.simpleVariables&&p.push.apply(p,r.simpleVariables)):r.value&&(i=r.value.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n"),u.push('"'+i+'"'));return u=u.join(" + "),o=t.Function("$$scope","var $$, __; return ("+u+")"),c={fn:o,simpleVariables:p},e&&(t.cacheSimpleText[e]=c),c}}();var O,j,L;L=function(e){var t,n,r,i;if(!e.length)return"el";for(i="el",n=0,r=e.length;r>n;n++)t=e[n],i+=".childNodes["+t+"]";return i},j=function(t){var n,r,i,o,a,l,c;for(i=e.utils.parsText(t),o=0,l=i.length;l>o;o++)if(r=i[o],"expression"===r.type){if(r.list.length>1)return null;if(a=r.list[0],"#"===a[0])return null;if("="===a[0])return null;if("::"===a.slice(0,2))return null;if(n=e.utils.compile.expression(a,{string:!0}),!n.rawExpression)throw"Error";r.re=n.rawExpression}return c=e.utils.compile.buildSimpleText(t,i),c.fn},e.core.fastBinding=function(t){return e.debug.fastBinding&&!t.directive&&!t.hook&&t.fb?new O(t):void 0},O=function(t){var n,r,i,o;return r=this,i=[],r.fastWatchFn=[],n=[],o=function(e,t){var a,l,c,s,u,p,f,h,d,m,v,g,y,b,w,k;if(e.dir)for(b=L(n),v=e.dir,s=0,h=v.length;h>s;s++)a=v[s],i.push("s.dir("+r.fastWatchFn.length+", "+b+");"),r.fastWatchFn.push(a);if(e.attr)for(g=e.attr,u=0,d=g.length;d>u;u++)c=g[u],k=c.value,p=c.attrName,b=L(n),l=j(k),w=k.replace(/"/g,'\\"').replace(/\n/g,"\\n"),l?(i.push('s.fw("'+w+'", '+r.fastWatchFn.length+", "+b+', "'+p+'");'),r.fastWatchFn.push(l)):i.push("s.wt('"+w+"', "+b+", '"+p+"');");if(e.text&&(b=L(n),l=j(e.text),w=e.text.replace(/"/g,'\\"').replace(/\n/g,"\\n"),l?(i.push('s.fw("'+w+'", '+r.fastWatchFn.length+", "+b+");"),r.fastWatchFn.push(l)):i.push('s.wt("'+w+'", '+b+");")),e.children)for(y=e.children,f=0,m=y.length;m>f;f++)c=y[f],n.length=t+1,n[t]=c.index,o(c.fb,t+1);return null},o(t.fb,0),i=i.join("\n"),r.resultFn=e.utils.compile.Function("s","el","f$",i),this},O.prototype.bind=function(e,n){this.currentCD=e,this.resultFn(this,n,t)},O.prototype.dir=function(e,t){var n,r;return r=this.fastWatchFn[e],n=this.currentCD,r.fb(n.scope,t,r.value,{attrName:r.attrName,attrArgument:r.attrArgument,changeDetector:n}),null},O.prototype.fw=function(e,t,n,r){var i,o,a,l;i=this.currentCD,o=this.fastWatchFn[t],a=o(i.locals),l={isStatic:!1,isArray:!1,extraLoop:!1,deep:!1,value:a,callback:null,exp:o,src:e,onStop:null,el:n,ea:r||null},i.watchList.push(l),c(i.scope,l,a)},O.prototype.wt=function(e,t,n){this.currentCD.watchText(e,null,{element:t,elementAttr:n})},function(){var n,r,i,o,a,l,c,s;return e.hooks.attribute.unshift({code:"events",fn:function(){var e;e=this.attrName.match(/^\@([\w\.\-]+)$/),e&&(this.ns="al",this.name="on",this.attrArgument=e[1])}}),e.hooks.eventModifier={},s=function(t,n){return e.hooks.eventModifier[t]={event:["keydown","keypress","keyup"],fn:function(e,t){e[n]||(t.stop=!0)}}},s("alt","altKey"),s("control","ctrlKey"),s("ctrl","ctrlKey"),s("meta","metaKey"),s("shift","shiftKey"),i=function(e,n){var r,i,o,a,l,c;if(c={},"string"==typeof e?c.event=e:"object"==typeof e&&e.event&&(c.event=e.event),"string"==typeof c.event&&(c.event=c.event.split(/\s+/)),n&&c.event){for(o=!1,l=c.event,i=0,a=l.length;a>i;i++)if(r=l[i],n.indexOf(r)>=0){o=!0;break}if(!o)return null}return t.isFunction(e)?c.fn=e:e.fn&&(c.fn=e.fn),e.init&&(c.init=e.init),c},e.d.al.on={priority:10,init:function(e,r,i,o){var l,s,u,p,f,h,d,m;if(o.fastBinding=!0,o.attrArgument){for(f=o.attrArgument.split(".")[0],u=c(o.attrArgument,n[f]),u.scope=e,u.element=r,u.expression=i,u.cd=l=o.changeDetector,u.fn=l.compile(i,{no_return:!0,input:["$event","$element","$value"]}),p=function(e){return a(u,e)},m=u.eventList,h=0,d=m.length;d>h;h++)s=m[h],t.on(r,s,p);u.initFn&&u.initFn(e,r,i,o),l.watch("$destroy",function(){var e,n,i,o;for(i=u.eventList,o=[],e=0,n=i.length;n>e;e++)s=i[e],o.push(t.off(r,s,p));return o})}}},l={enter:13,tab:9,"delete":46,backspace:8,esc:27,space:32,up:38,down:40,left:37,right:39},n={click:{stop:!0,prevent:!0},dblclick:{stop:!0,prevent:!0},submit:{stop:!0,prevent:!0},keyup:{filterByKey:!0},keypress:{filterByKey:!0},keydown:{filterByKey:!0}},c=function(t,n){var r,o,a,c,s,u,p,f,h;for(n=n||{},o={attrArgument:t,throttle:null,throttleId:null,debounce:null,debounceTime:0,initFn:null,eventList:null,stop:n.stop||!1,prevent:n.prevent||!1,scan:!0,modifiers:[]},r=t.split("."),a=r[0],c=null,f=e.hooks.eventModifier[a],f&&(f=i(f),f.event&&(o.eventList=f.event,f.fn&&o.modifiers.push(f),f.init&&(o.initFn=f.init))),o.eventList||(o.eventList=[a]),h=r.slice(1),s=0,p=h.length;p>s;s++)u=h[s],"stop"!==u?"prevent"!==u?"nostop"!==u?"noprevent"!==u?"noscan"!==u?"throttle-"!==u.substring(0,9)?"debounce-"!==u.substring(0,9)?(f=e.hooks.eventModifier[u],f?(f=i(f,o.eventList),f&&o.modifiers.push(f)):n.filterByKey&&(null===c&&(c={}),l[u]&&(u=l[u]),c[u]=!0)):o.debounce=Number(u.substring(9)):o.throttle=Number(u.substring(9)):o.scan=!1:o.prevent=!1:o.stop=!1:o.prevent=!0:o.stop=!0;return o.filterByKey=c,o},o=function(e,t){var n;return n=e.element,"checkbox"===n.type?n.checked:"radio"===n.type?n.value||n.checked:t.component?t.value:n.value},r=function(t,n){var r,i;try{t.fn(t.cd.locals,n,t.element,o(t,n))}catch(i){r=i,e.exceptionHandler(r,"Error in event: "+t.attrArgument+" = "+t.expression,{attr:t.attrArgument,exp:t.expression,scope:t.scope,cd:t.cd,element:t.element,event:n})}t.scan&&t.cd.scan()},a=function(e,t){var n,i,o,a,l;if(!e.filterByKey||e.filterByKey[t.keyCode]){if(e.modifiers.length)for(n={stop:!1},l=e.modifiers,i=0,o=l.length;o>i;i++)if(a=l[i],a.fn(t,n),n.stop)return;e.prevent&&t.preventDefault(),e.stop&&t.stopPropagation(),e.throttle?(e.throttleId&&clearTimeout(e.throttleId),e.throttleId=setTimeout(function(){return e.throttleId=null,r(e,t)},e.throttle)):e.debounce?e.debounceTime<Date.now()&&(e.debounceTime=Date.now()+e.debounce,r(e,t)):r(e,t)}}}(),e.hooks.attribute.unshift({code:"directDirective",fn:function(){var e=this.attrName.match(/^([^()]*)\(\)$/);if(e||(e=this.attrName.match(/^\*(.*)$/)),e){var t=e[1].replace(/(-\w)/g,function(e){return e.substring(1).toUpperCase()});this.directive=this.cd.locals[t]||window[t],this.directive||(this.result="noDirective",this.stop=!0)}}});var V;V=function(n){return{priority:10,stopPropagation:!0,link:function(r,i,o,a){var l;return l={stopPropagation:this.stopPropagation,callback:r.$compile(o,{no_return:!0,input:["$event"]}),start:function(){l.onDom(),l.stop=a.takeAttr("al-click-stop")},onDom:function(){t.on(i,n,l.doCallback),r.$watch("$destroy",l.offDom)},offDom:function(){t.off(i,n,l.doCallback)},doCallback:function(t){var n;if(l.stop||(t.preventDefault(),l.stopPropagation&&t.stopPropagation()),!i.getAttribute("disabled")){try{l.callback(r,t)}catch(n){t=n,e.exceptionHandler(t,"al-click, error in expression: "+o,{name:o,scope:r,element:i})}l.stop&&r.$eval(l.stop)&&(t.preventDefault(),l.stopPropagation&&t.stopPropagation()),r.$scan()}}}}}},e.d.al.click=V("click"),e.d.al.dblclick=V("dblclick"),e.d.al.value={priority:20,link:function(e,n,r){var i;return i={onDom:function(){t.on(n,"input",i.updateModel),t.on(n,"change",i.updateModel),e.$watch("$destroy",i.offDom)},offDom:function(){t.off(n,"input",i.updateModel),t.off(n,"change",i.updateModel)},updateModel:function(){e.$setValue(r,n.value),i.watch.refresh(),e.$scan()},watchModel:function(){i.watch=e.$watch(r,i.updateDom)},updateDom:function(e){return null==e&&(e=""),n.value=e,"$scanNoChanges"},start:function(){i.onDom(),i.watchModel()}}}},e.d.al.checked={priority:20,link:function(e,n,r){var i;return i={start:function(){i.onDom(),i.watchModel()},onDom:function(){t.on(n,"change",i.updateModel),e.$watch("$destroy",i.offDom)},offDom:function(){t.off(n,"change",i.updateModel)},updateModel:function(){var t;t=n.checked,e.$setValue(r,t),i.watch.refresh(),e.$scan()},watchModel:function(){i.watch=e.$watch(r,i.updateDom)},updateDom:function(e){return n.checked=!!e,"$scanNoChanges"}}}},e.d.al["if"]={priority:700,link:function(n,r,i,o){var a;return o.elementCanBeRemoved?(e.exceptionHandler(null,o.attrName+" can't control element because of "+o.elementCanBeRemoved,{scope:n,element:r,value:i,env:o}),{}):(o.stopBinding=!0,a={item:null,childCD:null,base_element:null,top_element:null,start:function(){a.prepare(),a.watchModel()},prepare:function(){a.base_element=r,a.top_element=document.createComment(" "+o.attrName+": "+i+" "),t.before(r,a.top_element),t.remove(r)},updateDom:function(e){e?a.insertBlock(e):a.removeBlock()},removeBlock:function(){a.childCD&&(a.childCD.destroy(),a.childCD=null,a.removeDom(a.item),a.item=null)},insertBlock:function(){a.childCD||(a.item=a.base_element.cloneNode(!0),a.insertDom(a.top_element,a.item),a.childCD=o.changeDetector["new"](),e.bind(a.childCD,a.item,{skip_attr:o.skippedAttr(),elementCanBeRemoved:o.attrName}))},watchModel:function(){n.$watch(i,a.updateDom)},removeDom:function(e){t.remove(e)},insertDom:function(e,n){t.after(e,n)}})}},e.d.al.ifnot={priority:700,link:function(t,n,r,i){var o;return o=e.d.al["if"].link(t,n,r,i),o.updateDom=function(e){e?o.removeBlock():o.insertBlock()},o}},e.directives.al.repeat={priority:1e3,restrict:"AM",init:function(n,r,i,o){var a,l;return o.elementCanBeRemoved?(e.exceptionHandler(null,o.attrName+" can't control element because of "+o.elementCanBeRemoved,{scope:n,element:r,value:i,env:o}),{}):(o.stopBinding=!0,a=o.changeDetector,l={start:function(){l.parsExpression(),l.prepareDom(),l.buildUpdateDom(),l.watchModel()},parsExpression:function(){var e,t;if(t=i.trim(),"("===t[0])if(l.objectMode=!0,e=t.match(/\((\w+),\s*(\w+)\)\s+in\s+(.+)\s+orderBy:(.+)\s*$/))l.objectKey=e[1],l.objectValue=e[2],l.expression=e[3]+(" | toArray:"+l.objectKey+","+l.objectValue+" | orderBy:"+e[4]),l.nameOfKey="$item",l.trackExpression="$item."+l.objectKey;else{if(e=t.match(/\((\w+),\s*(\w+)\)\s+in\s+(.+)\s*$/),!e)throw"Wrong repeat: "+i;l.objectKey=e[1],l.objectValue=e[2],l.expression=e[3]+(" | toArray:"+l.objectKey+","+l.objectValue),l.nameOfKey="$item",l.trackExpression="$item."+l.objectKey}else{if(e=t.match(/(.*) track by ([\w\.\$\(\)]+)/),e&&(l.trackExpression=e[2],t=e[1]),e=t.match(/\s*(\w+)\s+in\s+(.+)/),!e)throw"Wrong repeat: "+i;l.nameOfKey=e[1],l.expression=e[2]}},watchModel:function(){var e;e=l.objectMode?{deep:!0}:{isArray:!0},l.watch=a.watch(l.expression,l.updateDom,e)},prepareDom:function(){var e,n,a,c,s,u;if(8===r.nodeType){for(l.top_element=r,l.element_list=n=[],e=r.nextSibling;e;){if(8===e.nodeType&&(s=e.nodeValue,u=s.trim().split(/\s+/),"/directive:"===u[0]&&"al-repeat"===u[1])){o.skipToElement=e;break}n.push(e),e=e.nextSibling}for(a=0,c=n.length;c>a;a++)e=n[a],t.remove(e)}else l.base_element=r,l.top_element=document.createComment(" "+i+" "),t.before(r,l.top_element),t.remove(r)},makeChild:function(e,t,n){var r;return r=a["new"](null,{locals:!0}),l.updateLocals(r,e,t,n),r},updateLocals:function(e,t,n,r){var i;i=e.locals,l.objectMode?(i[l.objectKey]=t[l.objectKey],i[l.objectValue]=t[l.objectValue]):i[l.nameOfKey]=t,i.$index=n,i.$first=0===n,i.$last=n===r.length-1},rawUpdateDom:function(e,n){var r,i,o,a,l,c;for(i=0,l=e.length;l>i;i++)r=e[i],t.remove(r);for(a=0,c=n.length;c>a;a++)o=n[a],t.after(o.after,o.element)},buildUpdateDom:function(){return l.updateDom=function(){var t,n,i,c,s,u,p,f,h,d,m;return m=[],u=0,i=null,"$index"===l.trackExpression?(p={},h=function(){var e;return e=u,p[e]||null},f=function(e){var t;t=e.$id,null!=t&&delete p[t]},d=function(e,t){var n;n=u,t.$id=n,p[n]=t}):l.trackExpression?(p={},t=function(){var e;return e=a.compile(l.trackExpression,{input:["$id",l.nameOfKey]}),function(t,n){return e(a.scope,t,n)}}(),n=function(t){var n;return(n=t.$alite_id)?n:n=t.$alite_id=e.utils.getId()},h=function(e){var r;return r=t(n,e),null!=r?p[r]:null},f=function(e){var t;t=e.$id,null!=t&&delete p[t]},d=function(e,r){var i;i=t(n,e),r.$id=i,p[i]=r}):window.Map?(p=new Map,h=function(e){return p.get(e)},f=function(e){p["delete"](e.item)},d=function(e,t){p.set(e,t)}):(p={},h=function(e){var t;return"object"!=typeof e?p[e]||null:(t=e.$alite_id)?p[t]:null},f=function(e){var t;t=e.$id,p[t]&&(e.$id=null,delete p[t])},d=function(t,n){var r;"object"==typeof t?(r=e.utils.getId(),t.$alite_id=r,n.$id=r,p[r]=n):(n.$id=t,p[t]=n)}),c=[],s=function(e){var t,n;if(n=typeof e,"object"!==n){if("number"===n)t=Math.floor(e);else if("string"===n&&(t=Math.floor(e),isNaN(t)))return[];if(t<c.length)c.length=t;else for(;c.length<t;)c.push(c.length);return c}return e&&e.length?e:[]},l.element_list?function(t){var n,r,i,a,c,p,v,g,y,b,w,k,x,$,D,C,_,B,A,T,S,N,E,M,O,j,L,V,F,H,I,K,R,W,q,G,P,U,z;for(O=s(t),C=l.top_element,a=[],H=[],y=0,_=m.length;_>y;y++)F=m[y],F.active=!1;for(u=x=0,B=O.length;B>x;u=++x)w=O[u],F=h(w),F&&(F.active=!0);for(c=[],$=0,A=m.length;A>$;$++)if(F=m[$],!F.active){for(F.prev&&(F.prev.next=F.next),F.next&&(F.next.prev=F.prev),f(F),F.CD.destroy(),G=F.element_list,D=0,T=G.length;T>D;D++)p=G[D],c.push(p);F.next=null,F.prev=null,F.element_list=null}for(n=[],R=null,q=null,W=!1,v=l.element_list.length-1,u=j=0,S=O.length;S>j;u=++j)if(w=O[u],k=w,F=h(w)){if(l.updateLocals(F.CD,w,u,O),F.prev===q){if(W)for(P=F.element_list,L=0,N=P.length;N>L;L++)p=P[L],a.push({element:p,after:C}),C=p;q=F,C=F.element_list[v],F.active=!0,H.push(F);continue}for(F.prev=q,q&&(q.next=F),U=F.element_list,I=0,E=U.length;E>I;I++)p=U[I],a.push({element:p,after:C}),C=p;W=!0,q=F,F.active=!0,H.push(F)}else i=l.makeChild(k,u,O),g=function(){var e,t,o,c;for(o=l.element_list,c=[],t=0,e=o.length;e>t;t++)r=o[t],p=r.cloneNode(!0),n.push({cd:i,el:p}),a.push({element:p,after:C}),c.push(C=p);return c}(),F={CD:i,element_list:g,prev:q,next:null,active:!0,item:w},d(w,F),q?(V=q.next,q.next=F,F.next=V,V&&(V.prev=F)):0===u&&m[0]&&(V=m[0],F.next=V,V.prev=F),q=F,H.push(F);for(m=H,l.rawUpdateDom(c,a),c.length=0,a.length=0,z=o.skippedAttr(),K=0,M=n.length;M>K;K++)b=n[K],e.bind(b.cd,b.el,{skip_attr:z,elementCanBeRemoved:o.attrName})}:function(t){var n,a,c,p,v,g,y,b,w,k,x,$,D,C,_,B,A,T,S,N,E,M,O,j,L,V,F;for(T=s(t),$=l.top_element,c=[],M=[],v=0,D=m.length;D>v;v++)E=m[v],E.active=!1;for(u=w=0,C=T.length;C>w;u=++w)y=T[u],E=h(y),E&&(E.active=!0);for(p=[],k=0,_=m.length;_>k;k++)E=m[k],E.active||(E.prev&&(E.prev.next=E.next),E.next&&(E.next.prev=E.prev),f(E),E.CD.destroy(),p.push(E.element),E.next=null,E.prev=null,E.element=null);for(n=[],O=null,L=null,j=!1,u=x=0,B=T.length;B>x;u=++x)if(y=T[u],b=y,E=h(y)){if(l.updateLocals(E.CD,y,u,T),E.prev===L){j&&c.push({element:E.element,after:L.element}),L=E,$=E.element,E.active=!0,M.push(E);continue}E.prev=L,L&&(L.next=E),c.push({element:E.element,after:$}),j=!0,$=E.element,L=E,E.active=!0,M.push(E)}else a=l.makeChild(b,u,T),r=l.base_element.cloneNode(!0),n.push({cd:a,el:r}),c.push({element:r,after:$}),E={CD:a,element:r,prev:L,next:null,active:!0,item:y},$=r,d(y,E),L?(N=L.next,L.next=E,E.next=N,N&&(N.prev=E)):0===u&&m[0]&&(N=m[0],E.next=N,N.prev=E),L=E,M.push(E);for(m=M,l.rawUpdateDom(p,c),p.length=0,c.length=0,F=o.skippedAttr(),S=0,A=n.length;A>S;S++)g=n[S],i?i.bind(g.cd,g.el):(V=e.bind(g.cd,g.el,{skip_attr:F,elementCanBeRemoved:o.attrName}),null===i&&(i=e.core.fastBinding(V)||!1))}}()}})}},e.d.al.init=function(t,n,r,i){var o,a,l,c;o=i.changeDetector;try{c=o.compile(r,{no_return:!0,input:["$element"]}),c(o.locals,n)}catch(l){a=l,e.exceptionHandler(a,"al-init, error in expression: "+r,{exp:r,scope:t,cd:o,element:n})}},e.d.al["class"]=e.d.al.css={priority:30,link:function(n,r,i){var o;return o={start:function(){o.parsLine(),o.prepare()},parsLine:function(){var t,a,l,c,s,u;for(o.list=s=[],u=i.split(","),l=0,c=u.length;c>l;l++)t=u[l],a=t.indexOf(":"),0>a?e.exceptionHandler(t,"al-css, error in expression: "+i,{exp:i,e:t,scope:n,element:r}):s.push({css:t.slice(0,+(a-1)+1||9e9).trim().split(" "),exp:t.slice(a+1).trim()})},prepare:function(){var e,t,r,i,a;for(a=o.list,r=0,i=a.length;i>r;r++)t=a[r],e=function(e){return function(t){return o.draw(e,t),"$scanNoChanges"}}(t),n.$watch(t.exp,e)},draw:function(e,n){var i,o,a,l,c,s,u;if(n)for(s=e.css,o=0,l=s.length;l>o;o++)i=s[o],t.addClass(r,i);else for(u=e.css,a=0,c=u.length;c>a;a++)i=u[a],t.removeClass(r,i)}}}},e.d.al.src=function(e,t,n){var r;r=function(e){return e||(e=""),t.setAttribute("src",e),"$scanNoChanges"},e.$watchText(n,r)},e.d.al.text=function(e,t,n){var r;return r={start:function(){r.watchModel()},updateDom:function(e){return null==e&&(e=""),void 0!==t.textContent?t.textContent=e:t.innerText=e,"$scanNoChanges"},watchModel:function(){e.$watch(n,r.updateDom)}}},e.d.al.app={priority:2e3,stopBinding:!0},e.d.bo["switch"]={priority:500,ChangeDetector:!0,link:function(e,t,n,r){r.changeDetector.$switch={value:e.$eval(n),on:!1}}},e.d.bo.switchWhen={priority:500,link:function(e,n,r,i){var o;o=i.changeDetector,o.$switch.value!==r?(t.remove(n),i.stopBinding=!0):o.$switch.on=!0}},e.d.bo.switchDefault={priority:500,link:function(e,n,r,i){i.changeDetector.$switch.on&&(t.remove(n),i.stopBinding=!0)}},function(){var n;return n=function(e){var n;return n={priority:700,link:function(n,r,i,o){var a;a=n.$eval(i),!a===e&&(t.remove(r),o.stopBinding=!0)}}},e.d.bo["if"]=n(!0),e.d.bo.ifnot=n(!1)}(),e.d.al.stop={priority:-10,restrict:"AE",stopBinding:!0},e.d.al.include={priority:100,link:function(n,r,i,o){var a,l,c,s,u;return o.elementCanBeRemoved?(e.exceptionHandler(null,o.attrName+" can't control element because of "+o.elementCanBeRemoved,{scope:n,element:r,value:i,env:o}),{}):(o.stopBinding=!0,c=null,l=null,u=null,a=null,s={start:function(){s.prepare(),s.watchModel()},prepare:function(){l=r,u=document.createComment(" "+o.attrName+": "+i+" "),t.before(r,u),t.remove(r)},loadHtml:function(e){t.ajax(e)},removeBlock:function(){c&&(c.destroy(),c=null),a&&(s.removeDom(a),a=null)},insertBlock:function(t){a=l.cloneNode(!0),a.innerHTML=t,s.insertDom(u,a),c=o.changeDetector["new"](),e.bind(c,a,{skip_attr:o.skippedAttr(),elementCanBeRemoved:o.attrName})},updateDom:function(e){return e?void s.loadHtml({cache:!0,url:e,success:function(e){return s.removeBlock(),s.insertBlock(e)},error:s.removeBlock}):void s.removeBlock()},removeDom:function(e){t.remove(e)},insertDom:function(e,n){t.after(e,n)},watchModel:function(){n.$watch(i,s.updateDom)}})}},e.d.al.cloak=function(e,n,r,i){n.removeAttribute(i.attrName),r&&t.removeClass(n,r)},e.d.al.enable=function(e,t,n){var r;r=function(e){e?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled")},e.$watch(n,r)},e.d.al.disable=function(e,t,n){var r;r=function(e){e?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled")},e.$watch(n,r)},e.d.al.focused={priority:20,link:function(e,n,r){var i;return i={updateModel:function(t){e.$getValue(r)!==t&&(e.$setValue(r,t),self.watch.refresh(),e.$scan())},onDom:function(){var r,o;o=function(){return i.updateModel(!0)},r=function(){return i.updateModel(!1)},t.on(n,"focus",o),t.on(n,"blur",r),e.$watch("$destroy",function(){return t.off(n,"focus",o),t.off(n,"blur",r)})},updateDom:function(e){return e?n.focus():n.blur(),"$scanNoChanges"},watchModel:function(){self.watch=e.$watch(r,i.updateDom)},start:function(){i.onDom(),i.watchModel()}}}},e.d.al.readonly=function(e,t,n){var r;r=function(e){t.readOnly=!!e},e.$watch(n,r,{readOnly:!0})},e.d.al.submit=function(n,r,i){var o;return o={callback:n.$compile(i,{no_return:!0,input:["$event"]}),start:function(){o.onDom()},onDom:function(){t.on(r,"submit",o.doCallback),n.$watch("$destroy",o.offDom)},offDom:function(){t.off(r,"submit",o.doCallback)},doCallback:function(t){var a;t.preventDefault(),t.stopPropagation();try{o.callback(n,t)}catch(a){t=a,e.exceptionHandler(t,"al-submit, error in expression: "+i,{name:i,scope:n,element:r})}n.$scan()}}},function(){var n,r,i,o,a;for(o=["keydown","keypress","keyup","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","focus","blur","change"],a=[],n=0,i=o.length;i>n;n++)r=o[n],a.push(function(n){return e.d.al[n]=function(r,i,o){var a;return a={start:function(){a.makeCaller(),a.onDom()},makeCaller:function(){a.caller=r.$compile(o,{no_return:!0,input:["$event"]})},onDom:function(){t.on(i,n,a.callback),r.$watch("$destroy",a.offDom)},offDom:function(){t.off(i,n,a.callback)},callback:function(t){var l;try{a.caller(r,t)}catch(l){t=l,e.exceptionHandler(t,n+", error in expression: "+o,{exp:o,scope:r,element:i})}r.$scan()}}}}(r));return a}(),e.d.al.html={restrict:"AM",priority:100,modifier:{},link:function(n,r,i,o){var a;return o.elementCanBeRemoved&&8!==r.nodeType?(e.exceptionHandler(null,o.attrName+" can't control element because of "+o.elementCanBeRemoved,{scope:n,element:r,value:i,env:o}),{}):(o.stopBinding=!0,a={baseElement:null,topElement:null,activeElement:null,childCD:null,name:i,watchMode:null,start:function(){a.parsing(),a.prepare(),a.watchModel()},parsing:function(){var t,l,c,s;if(o.attrArgument)for(s=o.attrArgument.split("."),t=0,l=s.length;l>t;t++)c=s[t],"literal"!==c?"tpl"!==c?e.d.al.html.modifier[c]&&e.d.al.html.modifier[c](a,{scope:n,element:r,inputName:i,env:o}):a.watchMode="tpl":a.watchMode="literal"},prepare:function(){8===r.nodeType?(a.baseElement=null,a.topElement=r):(a.baseElement=r,a.topElement=document.createComment(" "+o.attrName+": "+i+" "),t.before(r,a.topElement),t.remove(r))},removeBlock:function(){var e,t,n,r;if(a.childCD&&(a.childCD.destroy(),a.childCD=null),a.activeElement){if(Array.isArray(a.activeElement))for(r=a.activeElement,t=0,n=r.length;n>t;t++)e=r[t],a.removeDom(e);else a.removeDom(a.activeElement);a.activeElement=null}},insertBlock:function(t){var n,r,i;if(a.baseElement)a.activeElement=a.baseElement.cloneNode(!1),a.activeElement.innerHTML=t,a.domOptimization&&e.utils.optmizeElement(a.activeElement),a.insertDom(a.topElement,a.activeElement),a.childCD=o.changeDetector["new"](),e.bind(a.childCD,a.activeElement,{skip_attr:o.skippedAttr(),elementCanBeRemoved:o.attrName});else for(i=document.createElement("body"),i.innerHTML=t,a.domOptimization&&e.utils.optmizeElement(i),n=a.topElement,a.activeElement=[],a.childCD=o.changeDetector["new"]();r=i.firstChild;)a.insertDom(n,r),n=r,a.activeElement.push(r),e.bind(a.childCD,n,{skip_attr:o.skippedAttr(),elementCanBeRemoved:o.attrName})},updateDom:function(e){a.removeBlock(),e&&a.insertBlock(e)},removeDom:function(e){t.remove(e)},insertDom:function(e,n){t.after(e,n)},watchModel:function(){"literal"===a.watchMode?a.updateDom(a.name):"tpl"===a.watchMode?n.$watchText(a.name,a.updateDom):n.$watch(a.name,a.updateDom)}})}},e.d.al.html.modifier.id=function(e){return e.updateDom=function(t){var n,r;e.removeBlock(),r=document.getElementById(t),r&&(n=r.innerHTML,n&&e.insertBlock(n))}},e.d.al.html.modifier.url=function(n){return n.domOptimization=e.debug.domOptimization,n.loadHtml=function(e){t.ajax(e)},n.updateDom=function(e){return e?void n.loadHtml({cache:!0,url:e,success:function(e){n.removeBlock(),n.insertBlock(e)},error:n.removeBlock}):void n.removeBlock()}},e.d.al.html.modifier.scope=function(t,n){var r,i,o,a;if(r=t.name.split(":"),2===r.length)t.name=r[0],a=r[1];else{if(r=t.name.match(/(.+)\:\s*\:\:([\d\w]+)$/))o=!0;else if(o=!1,r=t.name.match(/(.+)\:\s*([\.\w]+)$/),!r)throw"Wrong expression "+t.name;t.name=r[1],a=r[2]}return i="outer",t.insertBlock=function(r){var l,c,s;t.activeElement=t.baseElement.cloneNode(!1),t.activeElement.innerHTML=r,t.insertDom(t.topElement,t.activeElement),c=n.env.changeDetector,l=t.childCD=c["new"](null,{locals:!0}),s=c.watch(a,function(e){return l.locals[i]=e},{oneTime:o}),t.childCD.watch("$destroy",function(){return s.stop()}),e.bind(t.childCD,t.activeElement,{skip_attr:n.env.skippedAttr()})}},e.d.al.html.modifier.inline=function(e,t){var n;return n=e.prepare,e.prepare=function(){return n(),t.scope.$setValue(e.name,e.baseElement.innerHTML)}},e.d.al.radio={priority:20,link:function(e,n,r,i){var o;return o={start:function(){o.makeValue(),o.onDom(),o.watchModel()},makeValue:function(){var t,n;t=i.takeAttr("al-value"),n=t?e.$eval(t):i.takeAttr("value"),o.value=n},onDom:function(){t.on(n,"change",o.updateModel),e.$watch("$destroy",o.offDom)},offDom:function(){t.off(n,"change",o.updateModel)},updateModel:function(){e.$setValue(r,o.value),o.watch.refresh(),e.$scan()},watchModel:function(){o.watch=e.$watch(r,o.updateDom)},updateDom:function(e){return n.checked=e===o.value,"$scanNoChanges"}}}},e.d.al.show=function(e,n,r){var i;return i={showDom:function(){t.removeClass(n,"al-hide")},hideDom:function(){t.addClass(n,"al-hide")},updateDom:function(e){return e?i.showDom():i.hideDom(),"$scanNoChanges"},watchModel:function(){e.$watch(r,i.updateDom)},start:function(){i.watchModel()}}},e.d.al.hide=function(t,n,r,i){var o;return o=e.d.al.show(t,n,r,i),o.updateDom=function(e){return e?o.hideDom():o.showDom(),"$scanNoChanges"},o},e.d.al.style=function(e,t,n){var r,i;r={},i=function(e){var n,i,o,a;for(i in r)a=r[i],t.style[i]="";r={},o=e||{};for(n in o)a=o[n],i=n.replace(/(-\w)/g,function(e){return e.substring(1).toUpperCase()}),r[i]=a,t.style[i]=a||""},e.$watch(n,i,{deep:!0})},function(){var n;return window.Map?(n=function(){return this.idByItem=new Map,this.itemById={},this.index=1,this},n.prototype.acquire=function(e){var t;return t="i"+this.index++,this.idByItem.set(e,t),this.itemById[t]=e,t},n.prototype.release=function(e){var t;t=this.itemById[e],delete this.itemById[e],this.idByItem["delete"](t)},n.prototype.replace=function(e,t){var n;n=this.itemById[e],this.idByItem["delete"](n),this.idByItem.set(t,e),this.itemById[e]=t},n.prototype.getId=function(e){return this.idByItem.get(e)},n.prototype.getItem=function(e){return this.itemById[e]||null}):(n=function(){return this.itemById={"i#null":null},this},n.prototype.acquire=function(t){var n;return null===t?"i#null":("object"==typeof t?(n=t.$alite_id,n||(t.$alite_id=n=e.utils.getId())):n=""+t,this.itemById[n]=t,n)},n.prototype.release=function(e){delete this.itemById[e]},n.prototype.replace=function(e,t){this.itemById[e]=t
},n.prototype.getId=function(e){return null===e?"i#null":"object"==typeof e?e.$alite_id:""+e},n.prototype.getItem=function(e){return this.itemById[e]||null}),e.d.al.select={priority:20,link:function(r,i,o,a){var l,c,s,u,p,f;return l=a.changeDetector["new"](),a.stopBinding=!0,l.$select={mapper:s=new n},c=null,l.$select.change=function(){return e.nextTick(function(){return p(c)})},p=function(e){var t;return t=s.getId(e),t?i.value=t:i.selectedIndex=-1},f=l.watch(o,function(e){return c=e,p(e)}),u=function(e){return c=s.getItem(e.target.value),l.setValue(o,c),f.refresh(),l.scan()},t.on(i,"input",u),t.on(i,"change",u),l.watch("$destroy",function(){return t.off(i,"input",u),t.off(i,"change",u)}),e.bind(l,i,{skip_attr:a.skippedAttr()})}},e.d.al.option=function(t,n,r,i){var o,a,l,c,s,u,p;for(o=p=i.changeDetector,a=c=0;4>=c&&!(u=p.$select);a=++c)p=p.parent||{};return u?(s=u.mapper,l=null,o.watch(r,function(e){l?s.getId(e)!==l?(s.release(l),l=s.acquire(e),n.value=l,u.change()):s.replace(l,e):(l=s.acquire(e),n.value=l,u.change())}),void o.watch("$destroy",function(){return s.release(l),u.change()})):void e.exceptionHandler("","Error in al-option - al-select is not found",{cd:o,scope:o.scope,element:n,value:r})}}(),e.d.al.ctrl={global:!1,stopBinding:!0,priority:500,link:function(t,n,r,i){var o,a;return o=function(o,a){e.exceptionHandler(o,a,{name:r,env:i,scope:t,element:n})},a={getController:function(n){var r,i;return r=t.$ns,r&&r.ctrl&&(i=r.ctrl[n],!i&&!r.inheritGlobal)?void o("","Controller not found in $ns: "+n):(i||(i=e.ctrl[n],!i&&e.d.al.ctrl.global&&(i=window[n])),i||o("","Controller not found: "+n),i)},start:function(){var l,c,s,u,p,f,h,d,m,g,b,w;if(r){if(d=a.getController(r),!d)return}else d=null;if(d&&Object.keys(d.prototype).length){c=function(){},g=v.prototype;for(m in g)w=g[m],c.prototype[m]=w;b=d.prototype;for(m in b)w=b[m],c.prototype[m]=w;p=e.Scope({$parent:t,customScope:new c,childFromChangeDetector:i.changeDetector})}else p=e.Scope({$parent:t,childFromChangeDetector:i.changeDetector});try{d&&(s=y(p),l=function(){return this},l.prototype=i,u=new l,u.changeDetector=s,u.parentChangeDetector=i.changeDetector,k(p,s),d.call(p,p,n,r,u),k(p,null))}catch(h){f=h,o(f,"Error in controller: "+r)}e.bind(p,n,{skip_attr:i.skippedAttr()})}}}},function(){var t;return e.hooks.attribute.unshift({code:"attribute",fn:function(){var e,t;e=this.attrName.match(/^\:([\w\.\-]+)$/),e&&(t=e[1],"html"===t.split(".")[0]?(this.name="html",t=t.substring(5)):this.name="attr",this.ns="al",this.attrArgument=t)}}),t={checked:"checked",readonly:"readOnly",value:"value",selected:"selected",muted:"muted",disabled:"disabled",hidden:"hidden"},e.d.al.attr=function(e,n,r,i){var o,a,l,c,s,u;if(i.fastBinding=!0,i.attrArgument){if(a=i.attrArgument.split("."),o=a[0],c=t[o],l=a.indexOf("tpl")>0,"style"===o){if(!a[1])throw"Need to define a style attribute";u=a[1].replace(/(-\w)/g,function(e){return e.substring(1).toUpperCase()}),s=function(e){return null==e&&(e=""),n.style[u]=e}}else s="focus"===o?function(e){return e?n.focus():n.blur()}:function(e){return c?(void 0===e&&(e=null),n[c]!==e?n[c]=e:void 0):null!=e?n.setAttribute(o,e):n.removeAttribute(o)};return l?i.changeDetector.watchText(r,s,{readOnly:!0}):i.changeDetector.watch(r,s,{readOnly:!0})}}}(),e.d.al.model={priority:20,link:function(t,n,r,i){var o;if(o=n.nodeName.toLowerCase(),"select"===o)return e.d.al.select.link(t,n,r,i);if("input"===o){if("checkbox"===n.type)return e.d.al.checked.link(t,n,r,i);if("radio"===n.type)return e.d.al.radio.link(t,n,r,i)}return e.d.al.value.link(t,n,r,i)}},e.filters.slice=function(e,t,n){var r,i,o,a,l,c;return c=null,r=null,i=null,a=null,l=function(){return c&&a?n.setValue(2===a?c.slice(r,i):c.slice(r)):void 0},o=e.split(","),1===o.length?t.$watch(e,function(e){return a=1,r=e,l()}):t.$watch(o[0]+" + '_' + "+o[1],function(e){var t;return a=2,t=e.split("_"),r=Number(t[0]),i=Number(t[1]),l()}),this.onChange=function(e){return c=e,l()},this},e.filters.slice.prototype.ext=!0,function(){var t,n;return t=function(e){return 10>e?"0"+e:""+e},n=function(e,n){var r,i,o,a,l;if(!n)return"";for(n=new Date(n),l=[[/yyyy/g,n.getFullYear()],[/mm/g,t(n.getMonth()+1)],[/dd/g,t(n.getDate())],[/HH/g,t(n.getHours())],[/MM/g,t(n.getMinutes())],[/SS/g,t(n.getSeconds())]],a=e,i=0,o=l.length;o>i;i++)r=l[i],a=a.replace(r[0],r[1]);return a},e.filters.date=function(e,t){return n(t,e)}}();var F;e.filters.json=F=function(){function t(){}return t.prototype.watchMode="deep",t.prototype.onChange=function(t){return this.setValue(JSON.stringify(e.utils.clone(t),null,4))},t}();var H;e.filters.filter=H=function(){function e(e,t,n){var r,i;i=this,r=null,this.value=[],this.doFiltering=function(){var e,t,o,a,l,c,s;if(t=r,!t)return n.setValue(i.value),null;if("string"==typeof t)t={__all:t};else if("object"!=typeof t)return n.setValue(i.value),null;return c=function(){var n,r,c,u;for(c=i.value,u=[],n=0,r=c.length;r>n;n++)if(l=c[n],"object"==typeof l){if(o=!0,t.__all){o=!1,e=t.__all.toLowerCase();for(a in l)if(s=l[a],"$alite_id"!==a&&(""+s).toLowerCase().indexOf(e)>=0){o=!0;break}if(!o)continue}for(a in t)if(s=t[a],"__all"!==a){if(e=l[a],!e){o=!1;break}if((""+e).toLowerCase().indexOf((""+s).toLowerCase())<0){o=!1;break}}if(!o)continue;u.push(l)}else{if(!t.__all)continue;if(e=t.__all.toLowerCase(),(""+l).toLowerCase().indexOf(e)<0)continue;u.push(l)}return u}(),n.setValue(c),null},t.$watch(e,function(e){return r=e,i.doFiltering()},{deep:!0})}return e.prototype.onChange=function(e){return this.value=e,this.doFiltering()},e}();var I;e.filters.orderBy=I=function(){function e(e,t){var n;this.list=null,this.key="key",this.direction=1,n=e.split(","),n[0]&&t.$watch(n[0].trim(),function(e){return function(t){return e.key=t,e.doSort()}}(this)),n[1]&&t.$watch(n[1].trim(),function(e){return function(t){return e.direction=t?1:-1,e.doSort()}}(this))}return e.prototype.doSort=function(){return this.list instanceof Array?(this.list.sort(this.sortFn.bind(this)),this.setValue(this.list)):void 0},e.prototype.sortFn=function(e,t){var n,r;return n=e[this.key]||null,r=t[this.key]||null,r>n?-this.direction:n>r?this.direction:0},e.prototype.onChange=function(e){return this.list=e instanceof Array?e.slice():null,this.doSort()},e}();var K;e.filters.throttle=K=function(){function e(e,t,n){var r;e=Number(e),r=null,this.onChange=function(i){return r&&clearTimeout(r),r=setTimeout(function(){return r=null,n.setValue(i),t.$scan()},e)}}return e.prototype.ext=!0,e}();var R;return e.filters.toArray=R=function(){function e(e,t,n){var r,i,o,a;if(e){if(r=e.split(","),2!==r.length)throw"Wrong filter arguments for toArray";i=r[0].trim(),a=r[1].trim()}else i="key",a="value";o=[],this.onChange=function(e){var t,l;o.length=0;for(t in e)l=e[t],r={},r[i]=t,r[a]=l,o.push(r);return n.setValue(o)}}return e.prototype.watchMode="deep",e}(),e.filters.storeTo=function(e,t,n){return n.$setValue(t,e),e},e.text["="]=function(t,n,r,i){var o;if(o=e.utils.compile.expression(n),o.filters)throw"Conflict: bindonce and filters, use one-time binding";i["finally"](o.fn(i.changeDetector.locals))},e.text["::"]=function(e,t,n,r){n.$watch(t,function(e){return r["finally"](e)},{oneTime:!0})},e.text["&"]=function(e,t,n){var r,i;return r=t.split(":"),i=n.$compile(r[1],{input:["$value"]}),n.$watch(r[0],function(t){var r;return r=i(n,t),window.Promise&&r instanceof Promise?r.then(function(t){return e(t),n.$scan()}):e(r)})},e}var t=e();t.makeInstance=e,"function"==typeof alightInitCallback?alightInitCallback(t):"function"==typeof define?define(function(){return t}):"object"==typeof module&&"object"==typeof module.exports?module.exports=t:(t.d.al.ctrl.global=!0,window.alight=t,t.f$.ready(t.bootstrap))}();